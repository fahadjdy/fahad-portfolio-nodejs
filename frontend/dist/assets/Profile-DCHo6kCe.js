import{a as v}from"./index-NIGUFBhG.js";import{_ as w,c as d,a as o,d as c,g as _,f as u,v as f,e as m,w as g,T as p,o as n,t as b,h as k,r as h}from"./index-CqamQdaU.js";import{B as U}from"./Base-4qbJ1u12.js";const y="http://fahad-jadiya.com/backend/profile",x=t=>{throw t.response&&t.response.status===401&&(localStorage.removeItem("token"),window.location.href="/login"),t},j=async()=>{try{const t=await v.get(y,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});return t.data.data[0]||t.data}catch(t){x(t)}},F=async(t,e)=>{try{const a=localStorage.getItem("token"),i=new FormData;return i.append("full_name",e.full_name),i.append("email",e.email),i.append("phone",e.phone),i.append("address",e.address),i.append("about",e.about),e.image&&i.append("image",e.image),e.favicon&&i.append("favicon",e.favicon),e.logo&&i.append("logo",e.logo),(await v.put(`${y}/edit/${t}`,i,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${a}`}})).data}catch(a){x(a)}},B={data(){return{profile:{id:null,full_name:"",email:"",phone:"",address:"",about:"",image:"",logo:""},imagePreview:null,faviconPreview:null,logoPreview:null,image:null,favicon:null,logo:null,error:null,success:null}},methods:{handleImageUpload(t){if(this.image=t.target.files[0],this.image){const e=new FileReader;e.onload=a=>{this.imagePreview=a.target.result},e.readAsDataURL(this.image)}},handleFaviconUpload(t){if(this.favicon=t.target.files[0],this.favicon){const e=new FileReader;e.onload=a=>{this.faviconPreview=a.target.result},e.readAsDataURL(this.favicon)}},handleLogoUpload(t){if(this.logo=t.target.files[0],this.logo){const e=new FileReader;e.onload=a=>{this.logoPreview=a.target.result},e.readAsDataURL(this.logo)}},async saveProfile(){var t,e,a,i,l;try{const s=await F(this.profile.id,{...this.profile,image:this.image,favicon:this.favicon,logo:this.logo});this.error=null,this.success="Profile updated successfully!",setTimeout(()=>{this.success=null},3e3),(t=s.data)!=null&&t.image&&(this.imagePreview=`http://fahad-jadiya.com/public//${s.data.image}`),(e=s.data)!=null&&e.favicon&&(this.faviconPreview=`http://fahad-jadiya.com/public//${s.data.favicon}`),(a=s.data)!=null&&a.logo&&(this.logoPreview=`http://fahad-jadiya.com/public//${s.data.logo}`)}catch(s){this.error=((l=(i=s.response)==null?void 0:i.data)==null?void 0:l.message)||"Failed to update profile."}}},async mounted(){try{const t=await j();this.profile=t,this.profile.image&&(this.imagePreview=`http://fahad-jadiya.com/public//${this.profile.image}`),this.profile.favicon&&(this.faviconPreview=`http://fahad-jadiya.com/public//${this.profile.favicon}`),this.profile.logo&&(this.logoPreview=`http://fahad-jadiya.com/public//${this.profile.logo}`)}catch{this.error="Failed to load profile data."}}},C={class:"flex flex-col lg:flex-row lg:justify-start"},I={class:"w-full lg:w-1/2 p-6 bg-white shadow-xl rounded-lg"},L={class:"flex flex-col lg:flex-row gap-4"},A={class:"w-full"},V={class:"w-full"},R={class:"flex flex-col lg:flex-row gap-4"},N={key:0,class:"mt-4 flex justify-center"},S=["src"],T={key:0,class:"mt-4 flex justify-center"},z=["src"],E={key:0,class:"mt-4 flex justify-center"},M=["src"],q={key:0,class:"mt-4 text-sm text-red-500"},G={key:0,class:"mt-4 text-sm text-green-500"};function H(t,e,a,i,l,s){return n(),d("div",C,[o("div",I,[e[18]||(e[18]=o("h2",{class:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2"},"Edit Profile",-1)),o("form",{onSubmit:e[8]||(e[8]=_((...r)=>s.saveProfile&&s.saveProfile(...r),["prevent"])),class:"space-y-5"},[o("div",L,[o("div",A,[e[9]||(e[9]=o("label",{for:"full_name",class:"block text-sm font-medium text-gray-700 mb-1"},"Full Name",-1)),u(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>l.profile.full_name=r),name:"full_name",id:"full_name",autocomplete:"full_name",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"},null,512),[[f,l.profile.full_name]])]),o("div",V,[e[10]||(e[10]=o("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),u(o("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=r=>l.profile.email=r),id:"email",autocomplete:"email",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"},null,512),[[f,l.profile.email]])])]),o("div",null,[e[11]||(e[11]=o("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-1"},"Phone Number",-1)),u(o("input",{type:"tel","onUpdate:modelValue":e[2]||(e[2]=r=>l.profile.phone=r),id:"phone",autocomplete:"tel",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"},null,512),[[f,l.profile.phone]])]),o("div",null,[e[12]||(e[12]=o("label",{for:"address",class:"block text-sm font-medium text-gray-700 mb-1"},"Address",-1)),u(o("textarea",{"onUpdate:modelValue":e[3]||(e[3]=r=>l.profile.address=r),id:"address",rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none transition duration-300"},null,512),[[f,l.profile.address]])]),o("div",null,[e[13]||(e[13]=o("label",{for:"about",class:"block text-sm font-medium text-gray-700 mb-1"},"about",-1)),u(o("textarea",{"onUpdate:modelValue":e[4]||(e[4]=r=>l.profile.about=r),id:"about",name:"about",rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none transition duration-300"},null,512),[[f,l.profile.about]])]),o("div",R,[o("div",null,[e[14]||(e[14]=o("label",{for:"image",class:"block text-sm font-medium text-gray-700 mb-1"},"Profile Image",-1)),o("input",{type:"file",onChange:e[5]||(e[5]=(...r)=>s.handleImageUpload&&s.handleImageUpload(...r)),id:"image",accept:"image/*",class:"w-full border border-gray-300 rounded-lg p-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"},null,32),l.imagePreview?(n(),d("div",N,[o("img",{src:l.imagePreview,alt:"Profile preview",class:"w-32 h-32 object-cover rounded-full border border-gray-300 shadow"},null,8,S)])):m("",!0)]),o("div",null,[e[15]||(e[15]=o("label",{for:"favicon",class:"block text-sm font-medium text-gray-700 mb-1"},"Favicon",-1)),o("input",{type:"file",onChange:e[6]||(e[6]=(...r)=>s.handleFaviconUpload&&s.handleFaviconUpload(...r)),id:"favicon",name:"favicon",accept:"image/*",class:"w-full border border-gray-300 rounded-lg p-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"},null,32),l.faviconPreview?(n(),d("div",T,[o("img",{src:l.faviconPreview,alt:"Profile preview",class:"w-32 h-32 object-cover rounded-full border border-gray-300 shadow"},null,8,z)])):m("",!0)]),o("div",null,[e[16]||(e[16]=o("label",{for:"logo",class:"block text-sm font-medium text-gray-700 mb-1"},"Logo",-1)),o("input",{type:"file",onChange:e[7]||(e[7]=(...r)=>s.handleLogoUpload&&s.handleLogoUpload(...r)),id:"logo",name:"logo",accept:"image/*",class:"w-full border border-gray-300 rounded-lg p-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"},null,32),l.logoPreview?(n(),d("div",E,[o("img",{src:l.logoPreview,alt:"Logo preview",class:"w-32 h-32 object-cover rounded-full border border-gray-300 shadow"},null,8,M)])):m("",!0)])]),e[17]||(e[17]=o("button",{type:"submit",class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200"}," Update Profile ",-1))],32),c(p,{name:"fade"},{default:g(()=>[l.error?(n(),d("p",q,b(l.error),1)):m("",!0)]),_:1}),c(p,{name:"fade"},{default:g(()=>[l.success?(n(),d("p",G,b(l.success),1)):m("",!0)]),_:1})])])}const J=w(B,[["render",H],["__scopeId","data-v-d356025e"]]),K={components:{Base:U,ProfileComponent:J}};function O(t,e,a,i,l,s){const r=h("ProfileComponent"),P=h("Base");return n(),k(P,null,{default:g(()=>[c(r)]),_:1})}const Y=w(K,[["render",O]]);export{Y as default};
