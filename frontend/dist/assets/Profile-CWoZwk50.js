import{a as v}from"./index-NIGUFBhG.js";import{_ as w,c as d,a as o,f as m,e as _,w as u,v as f,d as c,g,T as p,o as n,t as b,h as k,r as h}from"./index-Cdq9OZIc.js";import{B as U}from"./Base-CGKzg1ZP.js";const y="http://localhost:8889/fahad-jadiya/profile",x=t=>{throw t.response&&t.response.status===401&&(localStorage.removeItem("token"),window.location.href="/login"),t},F=async()=>{try{const t=await v.get(y,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});return t.data.data[0]||t.data}catch(t){x(t)}},B=async(t,e)=>{try{const i=localStorage.getItem("token"),a=new FormData;return a.append("full_name",e.full_name),a.append("email",e.email),a.append("phone",e.phone),a.append("address",e.address),a.append("about",e.about),e.image&&a.append("image",e.image),e.favicon&&a.append("favicon",e.favicon),e.logo&&a.append("logo",e.logo),(await v.put(`${y}/edit/${t}`,a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${i}`}})).data}catch(i){x(i)}},C={data(){return{profile:{id:null,full_name:"",email:"",phone:"",address:"",about:"",image:"",logo:""},imagePreview:null,faviconPreview:null,logoPreview:null,image:null,favicon:null,logo:null,error:null,success:null}},methods:{handleImageUpload(t){if(this.image=t.target.files[0],this.image){const e=new FileReader;e.onload=i=>{this.imagePreview=i.target.result},e.readAsDataURL(this.image)}},handleFaviconUpload(t){if(this.favicon=t.target.files[0],this.favicon){const e=new FileReader;e.onload=i=>{this.faviconPreview=i.target.result},e.readAsDataURL(this.favicon)}},handleLogoUpload(t){if(this.logo=t.target.files[0],this.logo){const e=new FileReader;e.onload=i=>{this.logoPreview=i.target.result},e.readAsDataURL(this.logo)}},async saveProfile(){var t,e,i,a,l;try{const r=await B(this.profile.id,{...this.profile,image:this.image,favicon:this.favicon,logo:this.logo});this.error=null,this.success="Profile updated successfully!",setTimeout(()=>{this.success=null},3e3),(t=r.data)!=null&&t.image&&(this.imagePreview=`http://localhost:8889/public/${r.data.image}`),(e=r.data)!=null&&e.favicon&&(this.faviconPreview=`http://localhost:8889/public/${r.data.favicon}`),(i=r.data)!=null&&i.logo&&(this.logoPreview=`http://localhost:8889/public/${r.data.logo}`)}catch(r){this.error=((l=(a=r.response)==null?void 0:a.data)==null?void 0:l.message)||"Failed to update profile."}}},async mounted(){try{const t=await F();this.profile=t,this.profile.image&&(this.imagePreview=`http://localhost:8889/public/${this.profile.image}`),this.profile.favicon&&(this.faviconPreview=`http://localhost:8889/public/${this.profile.favicon}`),this.profile.logo&&(this.logoPreview=`http://localhost:8889/public/${this.profile.logo}`)}catch{this.error="Failed to load profile data."}}},I={class:"flex flex-col lg:flex-row lg:justify-start"},L={class:"w-full lg:w-1/2 p-6 bg-white shadow-xl rounded-lg"},j={class:"flex flex-col lg:flex-row gap-4"},A={class:"w-full"},V={class:"w-full"},R={class:"flex flex-col lg:flex-row gap-4"},N={key:0,class:"mt-4 flex justify-center"},S=["src"],T={key:0,class:"mt-4 flex justify-center"},z=["src"],E={key:0,class:"mt-4 flex justify-center"},M=["src"],q={key:0,class:"mt-4 text-sm text-red-500"},G={key:0,class:"mt-4 text-sm text-green-500"};function H(t,e,i,a,l,r){return n(),d("div",I,[o("div",L,[e[18]||(e[18]=o("h2",{class:"text-2xl font-bold mb-6 text-gray-800 border-b pb-2"},"Edit Profile",-1)),o("form",{onSubmit:e[8]||(e[8]=_((...s)=>r.saveProfile&&r.saveProfile(...s),["prevent"])),class:"space-y-5"},[o("div",j,[o("div",A,[e[9]||(e[9]=o("label",{for:"full_name",class:"block text-sm font-medium text-gray-700 mb-1"},"Full Name",-1)),u(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>l.profile.full_name=s),name:"full_name",id:"full_name",autocomplete:"full_name",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"},null,512),[[f,l.profile.full_name]])]),o("div",V,[e[10]||(e[10]=o("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),u(o("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=s=>l.profile.email=s),id:"email",autocomplete:"email",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"},null,512),[[f,l.profile.email]])])]),o("div",null,[e[11]||(e[11]=o("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-1"},"Phone Number",-1)),u(o("input",{type:"tel","onUpdate:modelValue":e[2]||(e[2]=s=>l.profile.phone=s),id:"phone",autocomplete:"tel",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"},null,512),[[f,l.profile.phone]])]),o("div",null,[e[12]||(e[12]=o("label",{for:"address",class:"block text-sm font-medium text-gray-700 mb-1"},"Address",-1)),u(o("textarea",{"onUpdate:modelValue":e[3]||(e[3]=s=>l.profile.address=s),id:"address",rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none transition duration-300"},null,512),[[f,l.profile.address]])]),o("div",null,[e[13]||(e[13]=o("label",{for:"about",class:"block text-sm font-medium text-gray-700 mb-1"},"about",-1)),u(o("textarea",{"onUpdate:modelValue":e[4]||(e[4]=s=>l.profile.about=s),id:"about",name:"about",rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none transition duration-300"},null,512),[[f,l.profile.about]])]),o("div",R,[o("div",null,[e[14]||(e[14]=o("label",{for:"image",class:"block text-sm font-medium text-gray-700 mb-1"},"Profile Image",-1)),o("input",{type:"file",onChange:e[5]||(e[5]=(...s)=>r.handleImageUpload&&r.handleImageUpload(...s)),id:"image",accept:"image/*",class:"w-full border border-gray-300 rounded-lg p-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"},null,32),l.imagePreview?(n(),d("div",N,[o("img",{src:l.imagePreview,alt:"Profile preview",class:"w-32 h-32 object-cover rounded-full border border-gray-300 shadow"},null,8,S)])):c("",!0)]),o("div",null,[e[15]||(e[15]=o("label",{for:"favicon",class:"block text-sm font-medium text-gray-700 mb-1"},"Favicon",-1)),o("input",{type:"file",onChange:e[6]||(e[6]=(...s)=>r.handleFaviconUpload&&r.handleFaviconUpload(...s)),id:"favicon",name:"favicon",accept:"image/*",class:"w-full border border-gray-300 rounded-lg p-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"},null,32),l.faviconPreview?(n(),d("div",T,[o("img",{src:l.faviconPreview,alt:"Profile preview",class:"w-32 h-32 object-cover rounded-full border border-gray-300 shadow"},null,8,z)])):c("",!0)]),o("div",null,[e[16]||(e[16]=o("label",{for:"logo",class:"block text-sm font-medium text-gray-700 mb-1"},"Logo",-1)),o("input",{type:"file",onChange:e[7]||(e[7]=(...s)=>r.handleLogoUpload&&r.handleLogoUpload(...s)),id:"logo",name:"logo",accept:"image/*",class:"w-full border border-gray-300 rounded-lg p-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-300"},null,32),l.logoPreview?(n(),d("div",E,[o("img",{src:l.logoPreview,alt:"Logo preview",class:"w-32 h-32 object-cover rounded-full border border-gray-300 shadow"},null,8,M)])):c("",!0)])]),e[17]||(e[17]=o("button",{type:"submit",class:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200"}," Update Profile ",-1))],32),m(p,{name:"fade"},{default:g(()=>[l.error?(n(),d("p",q,b(l.error),1)):c("",!0)]),_:1}),m(p,{name:"fade"},{default:g(()=>[l.success?(n(),d("p",G,b(l.success),1)):c("",!0)]),_:1})])])}const J=w(C,[["render",H],["__scopeId","data-v-92ec2054"]]),K={components:{Base:U,ProfileComponent:J}};function O(t,e,i,a,l,r){const s=h("ProfileComponent"),P=h("Base");return n(),k(P,null,{default:g(()=>[m(s)]),_:1})}const Y=w(K,[["render",O]]);export{Y as default};
